include(@CMAKE_BINARY_DIR@/CDash/Common.ctest)

SET_PROPERTY(GLOBAL PROPERTY SubProject "Debug")
# TODO: I think this is a bug in ctest that we need to pass the option explicitly to configure
SET(CTEST_BUILD_CONFIGURATION           "Debug")

CTEST_START(Experimental)
CTEST_CONFIGURE(BUILD "${CTEST_BINARY_DIRECTORY}"
                OPTIONS "-DCMAKE_BUILD_TYPE=${CTEST_BUILD_CONFIGURATION}")
CTEST_BUILD(BUILD "${CTEST_BINARY_DIRECTORY}")
CTEST_TEST(BUILD "${CTEST_BINARY_DIRECTORY}")
CTEST_MEMCHECK(BUILD "${CTEST_BINARY_DIRECTORY}")
CTEST_COVERAGE(BUILD "${CTEST_BINARY_DIRECTORY}")
CTEST_SUBMIT()
